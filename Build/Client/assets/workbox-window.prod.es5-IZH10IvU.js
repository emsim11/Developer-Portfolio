try{self["workbox:window:7.0.0"]&&_()}catch{}function E(e,i){return new Promise(function(n){var a=new MessageChannel;a.port1.onmessage=function(v){n(v.data)},e.postMessage(i,[a.port2])})}function W(e){var i=function(n){if(typeof n!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var v=a.call(n,"string");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof i=="symbol"?i:i+""}function k(e,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,W(a.key),a)}}function P(e,i){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},P(e,i)}function j(e,i){(i==null||i>e.length)&&(i=e.length);for(var n=0,a=new Array(i);n<i;n++)a[n]=e[n];return a}try{self["workbox:core:7.0.0"]&&_()}catch{}var w=function(){var e=this;this.promise=new Promise(function(i,n){e.resolve=i,e.reject=n})};function b(e,i){var n=location.href;return new URL(e,n).href===new URL(i,n).href}var g=function(e,i){this.type=e,Object.assign(this,i)};function d(e,i,n){return n?i?i(e):e:(e&&e.then||(e=Promise.resolve(e)),i?e.then(i):e)}function L(){}var O={type:"SKIP_WAITING"};function S(e,i){return e&&e.then?e.then(L):Promise.resolve()}var x=function(e){function i(c,u){var t,r;return u===void 0&&(u={}),(t=e.call(this)||this).nn={},t.tn=0,t.rn=new w,t.en=new w,t.on=new w,t.un=0,t.an=new Set,t.cn=function(){var o=t.fn,s=o.installing;t.tn>0||!b(s.scriptURL,t.sn.toString())||performance.now()>t.un+6e4?(t.vn=s,o.removeEventListener("updatefound",t.cn)):(t.hn=s,t.an.add(s),t.rn.resolve(s)),++t.tn,s.addEventListener("statechange",t.ln)},t.ln=function(o){var s=t.fn,f=o.target,p=f.state,m=f===t.vn,y={sw:f,isExternal:m,originalEvent:o};!m&&t.mn&&(y.isUpdate=!0),t.dispatchEvent(new g(p,y)),p==="installed"?t.wn=self.setTimeout(function(){p==="installed"&&s.waiting===f&&t.dispatchEvent(new g("waiting",y))},200):p==="activating"&&(clearTimeout(t.wn),m||t.en.resolve(f))},t.yn=function(o){var s=t.hn,f=s!==navigator.serviceWorker.controller;t.dispatchEvent(new g("controlling",{isExternal:f,originalEvent:o,sw:s,isUpdate:t.mn})),f||t.on.resolve(s)},t.gn=(r=function(o){var s=o.data,f=o.ports,p=o.source;return d(t.getSW(),function(){t.an.has(p)&&t.dispatchEvent(new g("message",{data:s,originalEvent:o,ports:f,sw:p}))})},function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];try{return Promise.resolve(r.apply(this,o))}catch(f){return Promise.reject(f)}}),t.sn=c,t.nn=u,navigator.serviceWorker.addEventListener("message",t.gn),t}var n,a;a=e,(n=i).prototype=Object.create(a.prototype),n.prototype.constructor=n,P(n,a);var v,l,h=i.prototype;return h.register=function(c){var u=(c===void 0?{}:c).immediate,t=u!==void 0&&u;try{var r=this;return d(function(o,s){var f=o();return f&&f.then?f.then(s):s()}(function(){if(!t&&document.readyState!=="complete")return S(new Promise(function(o){return window.addEventListener("load",o)}))},function(){return r.mn=!!navigator.serviceWorker.controller,r.dn=r.pn(),d(r.bn(),function(o){r.fn=o,r.dn&&(r.hn=r.dn,r.en.resolve(r.dn),r.on.resolve(r.dn),r.dn.addEventListener("statechange",r.ln,{once:!0}));var s=r.fn.waiting;return s&&b(s.scriptURL,r.sn.toString())&&(r.hn=s,Promise.resolve().then(function(){r.dispatchEvent(new g("waiting",{sw:s,wasWaitingBeforeRegister:!0}))}).then(function(){})),r.hn&&(r.rn.resolve(r.hn),r.an.add(r.hn)),r.fn.addEventListener("updatefound",r.cn),navigator.serviceWorker.addEventListener("controllerchange",r.yn),r.fn})}))}catch(o){return Promise.reject(o)}},h.update=function(){try{return this.fn?d(S(this.fn.update())):d()}catch(c){return Promise.reject(c)}},h.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},h.messageSW=function(c){try{return d(this.getSW(),function(u){return E(u,c)})}catch(u){return Promise.reject(u)}},h.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&E(this.fn.waiting,O)},h.pn=function(){var c=navigator.serviceWorker.controller;return c&&b(c.scriptURL,this.sn.toString())?c:void 0},h.bn=function(){try{var c=this;return d(function(u,t){try{var r=u()}catch(o){return t(o)}return r&&r.then?r.then(void 0,t):r}(function(){return d(navigator.serviceWorker.register(c.sn,c.nn),function(u){return c.un=performance.now(),u})},function(u){throw u}))}catch(u){return Promise.reject(u)}},v=i,(l=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&k(v.prototype,l),Object.defineProperty(v,"prototype",{writable:!1}),v}(function(){function e(){this.Pn=new Map}var i=e.prototype;return i.addEventListener=function(n,a){this.jn(n).add(a)},i.removeEventListener=function(n,a){this.jn(n).delete(a)},i.dispatchEvent=function(n){n.target=this;for(var a,v=function(l,h){var c=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(c)return(c=c.call(l)).next.bind(c);if(Array.isArray(l)||(c=function(t,r){if(t){if(typeof t=="string")return j(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set"?Array.from(t):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?j(t,r):void 0}}(l))||h){c&&(l=c);var u=0;return function(){return u>=l.length?{done:!0}:{done:!1,value:l[u++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(this.jn(n.type));!(a=v()).done;)(0,a.value)(n)},i.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e}());export{x as Workbox,g as WorkboxEvent,E as messageSW};
